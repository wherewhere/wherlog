@implements IAsyncDisposable
@inject IJSRuntime JSRuntime
@inject IStringLocalizer<TableOfContents> Loc
@inject NavigationManager NavigationManager

<div class="table-of-contents">
    <FluentAccordion>
        <FluentAccordionItem Expanded="_expanded"
                             Heading="@Heading"
                             Id="toc"
                             role="doc-toc">
            <FluentIcon Value="@(new Icons.Regular.Size20.TextBulletListTree())"
                        Color="@Color.Accent"
                        Slot="start" />
            @GetTocItems(_anchors)
        </FluentAccordionItem>
    </FluentAccordion>

    @if (ShowBackButton)
    {
        <FluentButton Appearance=Appearance.Accent
                      @onclick="BackToTopAsync"
                      Id="backtotop"
                      Title="@Loc["BackToTopTitle"]"
                      IconStart="new Icons.Regular.Size16.ArrowUp()">
            <span>0%</span>
        </FluentButton>
    }
</div>
